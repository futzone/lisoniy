# 8-Mavzu: OpenAI Whisper Modellari

## Mahalliy STT ning Oltin Standarti

OpenAI tomonidan yaratilgan **Whisper** - bu ochiq manbali (open-source), ko'p qirrali va yuqori aniqlikka ega bo'lgan avtomatik nutqni aniqlash (ASR) tizimi. Uning chiqarilishi mahalliy (on-premise) STT loyihalarini amalga oshirishni ancha osonlashtirdi va ko'plab ishlab chiquvchilar uchun birinchi tanlovga aylandi.

Whisper **Seq2Seq (Encoder-Decoder)** arxitekturasiga asoslangan va internetdan to'plangan **680,000 soatlik** ulkan, ko'p tilli va ko'p vazifali ma'lumotlar to'plamida o'qitilgan.

---

### Whisper Modelining Hajmlari

Whisper bir nechta o'lchamdagi modellarni taklif qiladi. Model qanchalik katta bo'lsa, u shunchalik aniq ishlaydi, lekin ko'proq hisoblash resurslarini (GPU xotirasi) talab qiladi.

| Model O'lchami | Parametrlar soni | VRAM Talabi (taxminiy) | Nisbiy Tezlik |
| :------------- | :--------------- | :--------------------- | :------------ |
| `tiny`         | 39 million       | ~1 GB                  | ~32x          |
| `base`         | 74 million       | ~1 GB                  | ~16x          |
| `small`        | 244 million      | ~2 GB                  | ~6x           |
| `medium`       | 769 million      | ~5 GB                  | ~2x           |
| `large-v3`     | 1.55 milliard    | ~10 GB                 | 1x            |

-   **`tiny`, `base`, `small`:** Bu modellar tezkor prototiplash, kam quvvatli qurilmalar va ingliz tili uchun juda yaxshi ishlaydi.
-   **`medium`:** Ko'pchilik vazifalar uchun aniqlik va tezlik o'rtasidagi "oltin o'rtaliq".
-   **`large-v3`:** Eng aniq model. Agar sizga eng yuqori sifat kerak bo'lsa va yetarli GPU resurslaringiz bo'lsa, shu modelni tanlang. Ko'p tilli vazifalarda va shovqinli audiolarda eng yaxshi natijani ko'rsatadi.

**Tavsiya:** Har doim eng kichik model (`tiny` yoki `base`) bilan boshlang va natijalarni sinab ko'ring. Agar aniqlik yetarli bo'lmasa, keyingi kattaroq modelga o'ting.

---

### Tezkor Boshlash: Python Kodi

Whisper-dan foydalanish juda oson. Avval `openai-whisper` kutubxonasini o'rnatishingiz kerak:

```bash
pip install openai-whisper
```
*Izoh: GPU-da ishlatish uchun `pytorch` kutubxonasi to'g'ri sozlangan bo'lishi kerak.*

So'ngra, bir necha qator kod bilan audioni matnga aylantirishingiz mumkin:

```python
import whisper

# Modelni yuklash (birinchi marta yuklaganda biroz vaqt oladi)
# 'medium' o'rniga 'tiny', 'base', 'small', 'large-v3' ishlatishingiz mumkin
model = whisper.load_model("medium")

# Audio faylni transkripsiya qilish
# Masalan, 'audio.mp3' fayli
result = model.transcribe("audio.mp3")

# Natijani chop etish
print(result["text"])

# -----------------
# Qo'shimcha imkoniyatlar: tilni belgilash va tarjima qilish

# O'zbek tilidagi audio uchun tilni aniq belgilash
result_uz = model.transcribe("uzbek_audio.mp3", language="uz")
print("O'zbekcha matn:", result_uz["text"])

# Audioni to'g'ridan-to'g'ri ingliz tiliga tarjima qilish
result_translate = model.transcribe("uzbek_audio.mp3", task="translate")
print("Ingliz tiliga tarjima:", result_translate["text"])

```

---

### Whisper'ning Afzalliklari va Kamchiliklari

✅ **Afzalliklari:**
-   **Yuqori Aniqlik:** Ko'plab tillarda, hatto shovqinli sharoitlarda ham bulutli xizmatlar bilan raqobatlasha oladigan darajada aniq.
-   **Ko'p Tilli:** 99 ta turli tilda nutqni taniy oladi va ular orasida tarjima qila oladi.
-   **Mustahkamlik (Robustness):** Fon shovqini, turli aksentlar va texnik bo'lmagan audio sifatiga juda chidamli.
-   **Ochiq Manba:** Bepul, ishlatish va o'zgartirish mumkin. Maxfiylikni to'liq ta'minlaydi.
-   **Punktuatsiya va Registr:** Avtomatik ravishda tinish belgilarini qo'yadi va bosh harflarni to'g'ri ishlatadi.

❌ **Kamchiliklari:**
-   **Real-time Streaming Yo'q:** Whisper arxitekturasi butun audioni bir vaqtda qayta ishlashga mo'ljallangan, shuning uchun real-vaqtda oqimli transkripsiya uchun to'g'ridan-to'g'ri mos kelmaydi (buning uchun `whisper-streaming` kabi qo'shimcha kutubxonalar mavjud, lekin ular murakkabroq).
-   **Speaker Diarization Yo'q:** Kim gapirayotganini avtomatik ajrata olmaydi. Barcha nutq bitta matn sifatida chiqariladi.
-   **So'z darajasida vaqt belgilari (Word-level timestamps):** Asl kutubxonada so'zlar uchun aniq vaqt belgilarini olish qiyinroq (buning uchun ham qo'shimcha yechimlar mavjud).

**Xulosa:** Agar sizning vazifangiz oflayn audio fayllarni yuqori aniqlik bilan matnga aylantirish bo'lsa va real-vaqt talabi bo'lmasa, **Whisper mahalliy STT uchun eng yaxshi va eng oson boshlanish nuqtasi** hisoblanadi.